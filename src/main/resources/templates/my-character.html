<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link
      th:href="@{/css/bootstrap.min.css}"
      href="../static/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link th:href="@{/my-character.css}" href="../static/my-character.css" rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>

  </head>
  <body class="container container-min-width background-body pt-2 pb-2">
    <div class="character-searchbar">
      <form
        th:action="@{/}"
        method="post"
        class="flex-column"
        th:object="${characterDto}"
      >
        <div>
          <label for="name" class="text-color-white"></label>
          <input
            id="name"
            type="text"
            placeholder="캐릭터 이름"
            th:field="*{characterName}"
            required
          />
          <label for="date" hidden></label>
          <input
            id="date"
            type="date"
            th:max="${maxDate}"
            min="2024-01-18"
            th:field="*{date}"
            required
          />
          <label id="maximumAssaultDate" class="text-color-white"
            >최근 최대 전투력 찾기</label
          >
          <input type="checkbox" th:field="*{maximumAssaultDate}" />
          <button type="submit">검색</button>
        </div>
      </form>
    </div>

    <div th:object="${character}" class="character-container">
      <div class="character-container-top">
        <!--캐릭터 창 왼쪽 영역-->
        <div class="character-container-sub">
          <div class="character-container-sub-sub">
            <div class="character-text-box text-center background-main">
              <span th:text="*{characterClass}" class="text-color-white"
                >소울마스터</span
              >
            </div>

            <div class="character-text-box text-center background-sub">
              <span th:text="*{worldName}" class="text-color-white">루나</span>
            </div>
          </div>
          <div class="character-container-sub-sub">
            <div class="character-text-box text-space-between background-sub">
              <span class="text-color-white">유니온</span>
              <span th:text="*{characterUnionLevel}" class="text-color-black"
                >-</span
              >
            </div>
            <div class="character-text-box text-space-between background-sub">
              <span class="text-color-white">무릉도장</span>
              <span th:text="*{dojangFloor}" class="text-color-black"
                >-</span
              >
            </div>
            <div class="character-text-box text-space-between background-sub">
              <span class="text-color-white">인기도</span>
              <span th:text="*{characterPopularity}" class="text-color-black"
                >-</span
              >
            </div>
          </div>
        </div>

        <!--캐릭터 창 중앙 영역-->
        <div class="character-container-sub pt-0">
          <div
            class="character-text-box text-center background-main mt-0 level-text-box"
          >
            <span th:text="|Lv. *{characterLevel}|" class="text-color-white"
              >Lv. 285</span
            >
          </div>

          <img
            th:src="*{characterImage}"
            class="character-img"
            alt="character img"
            src="https://open.api.nexon.com/static/maplestory/Character/KFKFDBBEGEDEKAGCFCHFOOFMOHGJCNLNDHFOBDIEFIIMOACGECJBNAMOMMBIMEKGPCFHBBOGOIEKEAPDIOIEHAGHCGCDBNBLBIIMPCMACMAHFACNJNJGCABEMBMCPLGCLHAFGBICMNPOHAJAOFECEGJMBCNBINAGBHPCHIALIKMODNLKIOJLGGDPHEGHNBECPFCNJOCLLMCNECKIEGCJDPKNDDDBALCLCBKHOFPIKKDCNFILOMAMGFFNOBIDJCOC.png"
          />
          <div class="character-text-box text-center background-point-main">
            <span th:text="*{characterName}" class="text-color-white"
              >캐릭터 이름</span
            >
          </div>
        </div>

        <!--캐릭터 창 오른쪽 영역-->
        <div class="character-container-sub">
          <div class="character-container-sub-sub">
            <div
              class="character-text-box text-center background-main flex-column"
            >
              <span
                th:text="|*{date.getYear()} / *{date.getMonthValue()} / *{date.getDayOfMonth()} 기준|"
                class="text-color-white"
                >2023 / 12 / 31 기준</span
              >
            </div>
          </div>
          <div class="character-container-sub-sub">
            <div
              class="character-text-box"
              th:each="ability : *{characterAbility}"
              th:classappend="${ability.abilityGrade} == '레전드리' ? 'ability-legendary' :
                                    (${ability.abilityGrade} == '유니크' ? 'ability-unique' :
                                    (${ability.abilityGrade} == '에픽' ? 'ability-epic' :
                                    (${ability.abilityGrade} == '레어' ? 'ability-rare' : '')))"
            >
              <span th:text="${ability.abilityValue}" class="text-color-white"
                >어빌리티</span
              >
            </div>
          </div>
          <div class="character-container-sub-sub">
            <div class="character-text-box text-center background-point-main">
              <span class="text-color-white">길드</span>
            </div>

            <div class="character-text-box text-center background-sub">
              <span th:text="${character.characterGuildName != null ? character.characterGuildName : '-'}">길드 이름</span>
            </div>
          </div>
        </div>
      </div>

      <!--전투력 수치 표시 영역-->
      <div class="character-container-bottom background-point-sub">
        <div class="character-assault-box">
          <span class="text-color-white">전투력</span>
        </div>
        <div class="character-assault-box assault-center">
          <div class="character-assault-box-text">
            <span
              th:if="${numberUnits[0] > 0}"
              th:text="|${numberUnits[0]}억 |"
              class="character-assault-text"
              >1억
            </span>
            <span
              th:if="${numberUnits[1] > 0}"
              th:text="|${numberUnits[1]}만 |"
              class="character-assault-text"
              >1234만
            </span>
            <span
              th:if="${numberUnits[2] > 0}"
              th:text="|${numberUnits[2]}|"
              class="character-assault-text"
              >1234</span
            >
          </div>
        </div>

        <div class="character-assault-box character-assault-box-right">
          <span
            th:text="|${savedPresetNo}번 장비 프리셋 기준|"
            class="text-color-white"
            >1번 장비 프리셋 기준</span
          >
        </div>
      </div>
    </div>

    <div class="preset-button-container">
      <!--1번 프리셋 버튼-->
      <button
        th:onclick="|location.href='@{/my-character/1}'|"
        th:classappend="${presetNo == 1 ? 'background-sub-light text-color-black' : 'background-main text-color-white'}"
        class="preset-button"
      >
        1번 프리셋
      </button>

      <!--2번 프리셋 버튼-->
      <button
        th:onclick="|location.href='@{/my-character/2}'|"
        th:classappend="${presetNo == 2 ? 'background-sub-light text-color-black' : 'background-main text-color-white'}"
        class="preset-button"
      >
        2번 프리셋
      </button>

      <!--3번 프리셋 버튼-->
      <button
        th:onclick="|location.href='@{/my-character/3}'|"
        th:classappend="${presetNo == 3 ? 'background-sub-light text-color-black' : 'background-main text-color-white'}"
        class="preset-button"
      >
        3번 프리셋
      </button>
    </div>

    <div class="preset-container background-sub-light">
      <div class="preset-item-container accordion" id="accordionExample">
        <!--무보엠-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOne"
              aria-expanded="true"
              aria-controls="collapseOne"
            >
              무보엠
            </button>
          </h2>
          <div
            id="collapseOne"
            class="accordion-collapse collapse show"
            aria-labelledby="headingOne"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body px-2">
              <div class="preset-item-container-category">
                <div
                  th:each="item : ${itemWeapons}"
                  class="preset-item background-sub-light"
                  th:object="${item.value}"
                >
                  <div class="preset-item-sub">
                    <img
                      th:src="*{itemImage}"
                      alt="item image"
                      class="item-img"
                    />
                  </div>

                  <div class="preset-item-sub preset-item-text-box">
                    <div class="preset-item-text-title">
                      <span th:text="|Lv.*{itemBaseEquipLevel}|"></span>
                      <span
                        th:if="*{starforce != 0}"
                        th:text="|★*{starforce}|"
                        class="preset-item-starforce"
                        th:classappend="*{starforceScroll} ? 'preset-item-starforce-scroll' : ''"
                        >★22</span
                      >
                      <span th:text="*{itemName}">아이템 이름</span>
                    </div>

                    <div class="preset-item-text-options">
                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{addOption != null}"
                          class="preset-item-text-potential-grade"
                        >
                          추가옵션
                        </span>
                        <!--th:object="*{addOption}"-->
                        <div
                          th:if="${weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                        >
                          <span
                            th:if="*{addOption.power != 0}"
                            th:text="|공/마 *{addOption.power}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0}"
                            th:text="|보뎀 *{addOption.bossDamage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0 && addOption.damage != 0}"
                            th:text="| + *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage == 0 && addOption.damage != 0}"
                            th:text="|뎀 *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.allStat != 0}"
                            th:text="|올스탯 *{addOption.allStat}|"
                          ></span>
                        </div>
                        <span
                          th:if="${!weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                          th:text="|*{addOption.mainStat}급|"
                          >150급</span
                        >
                      </div>

                      <div th:if="*{addOption != null}" class="divider"></div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="preset-item-text-potential"
                      >
                        <span class="preset-item-text-potential-grade"
                          >주문서</span
                        >
                        <span
                          th:text="| ${#numbers.formatDecimal(item.value.etcOption[0], 1, 1)} / ${#numbers.formatDecimal(item.value.etcOption[1], 1, 1)} 작|"
                          >6 / 2작</span
                        >
                      </div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{potentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{potentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{potentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{potentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{potentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >잠재옵션</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{potentialValue != null}"
                            th:each="potential : *{potentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 33</span
                          >
                        </div>
                      </div>

                      <div
                        th:if="*{additionalPotentialValue != null}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{additionalPotentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{additionalPotentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{additionalPotentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{additionalPotentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{additionalPotentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >에디셔널</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{additionalPotentialValue != null}"
                            th:each="potential : *{additionalPotentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 20</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--방어구-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseTwo"
              aria-expanded="false"
              aria-controls="collapseTwo"
            >
              방어구
            </button>
          </h2>
          <div
            id="collapseTwo"
            class="accordion-collapse collapse"
            aria-labelledby="headingTwo"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body px-2">
              <div class="preset-item-container-category">
                <div
                  th:each="item : ${itemArmors}"
                  class="preset-item background-sub-light"
                  th:object="${item.value}"
                >
                  <div class="preset-item-sub">
                    <img
                      th:src="*{itemImage}"
                      alt="item image"
                      class="item-img"
                    />
                  </div>

                  <div class="preset-item-sub preset-item-text-box">
                    <div class="preset-item-text-title">
                      <span th:text="|Lv.*{itemBaseEquipLevel}|"></span>
                      <span
                        th:if="*{starforce != 0}"
                        th:text="|★*{starforce}|"
                        class="preset-item-starforce"
                        th:classappend="*{starforceScroll} ? 'preset-item-starforce-scroll' : ''"
                        >★22</span
                      >
                      <span th:text="*{itemName}">아이템 이름</span>
                    </div>

                    <div class="preset-item-text-options">
                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{addOption != null}"
                          class="preset-item-text-potential-grade"
                        >
                          추가옵션
                        </span>
                        <!--th:object="*{addOption}"-->
                        <div
                          th:if="${weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                        >
                          <span
                            th:if="*{addOption.power != 0}"
                            th:text="|공/마 *{addOption.power}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0}"
                            th:text="|보뎀 *{addOption.bossDamage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0 && addOption.damage != 0}"
                            th:text="| + *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage == 0 && addOption.damage != 0}"
                            th:text="|뎀 *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.allStat != 0}"
                            th:text="|올스탯 *{addOption.allStat}|"
                          ></span>
                        </div>
                        <span
                          th:if="${!weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                          th:text="|*{addOption.mainStat}급|"
                          >150급</span
                        >
                      </div>

                      <div th:if="*{addOption != null}" class="divider"></div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="preset-item-text-potential"
                      >
                        <span class="preset-item-text-potential-grade"
                          >주문서</span
                        >
                        <span
                          th:text="| ${#numbers.formatDecimal(item.value.etcOption[0], 1, 1)} / ${#numbers.formatDecimal(item.value.etcOption[1], 1, 1)} 작|"
                          >6 / 2작</span
                        >
                      </div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{potentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{potentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{potentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{potentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{potentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >잠재옵션</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{potentialValue != null}"
                            th:each="potential : *{potentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 33</span
                          >
                        </div>
                      </div>

                      <div
                        th:if="*{additionalPotentialValue != null}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{additionalPotentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{additionalPotentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{additionalPotentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{additionalPotentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{additionalPotentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >에디셔널</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{additionalPotentialValue != null}"
                            th:each="potential : *{additionalPotentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 20</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--장신구-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseThree"
              aria-expanded="false"
              aria-controls="collapseThree"
            >
              장신구
            </button>
          </h2>
          <div
            id="collapseThree"
            class="accordion-collapse collapse"
            aria-labelledby="headingThree"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body px-2">
              <div class="preset-item-container-category">
                <div
                  th:each="item : ${itemAccessories}"
                  class="preset-item background-sub-light"
                  th:object="${item.value}"
                >
                  <div class="preset-item-sub">
                    <img
                      th:src="*{itemImage}"
                      alt="item image"
                      class="item-img"
                    />
                  </div>

                  <div class="preset-item-sub preset-item-text-box">
                    <div class="preset-item-text-title">
                      <span th:text="|Lv.*{itemBaseEquipLevel}|"></span>
                      <span
                        th:if="*{starforce != 0}"
                        th:text="|★*{starforce}|"
                        class="preset-item-starforce"
                        th:classappend="*{starforceScroll} ? 'preset-item-starforce-scroll' : ''"
                        >★22</span
                      >
                      <span th:text="*{itemName}">아이템 이름</span>
                    </div>

                    <div class="preset-item-text-options">
                      <div
                        th:if="*{specialRingLevel != 0}"
                        class="preset-item-text-potential"
                      >
                        <span class="preset-item-text-potential-grade"
                          >특수반지</span
                        >
                        <span th:text="|*{specialRingLevel} 레벨|"></span>
                      </div>
                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{addOption != null}"
                          class="preset-item-text-potential-grade"
                        >
                          추가옵션
                        </span>
                        <!--th:object="*{addOption}"-->
                        <div
                          th:if="${weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                        >
                          <span
                            th:if="*{addOption.power != 0}"
                            th:text="|공/마 *{addOption.power}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0}"
                            th:text="|보뎀 *{addOption.bossDamage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0 && addOption.damage != 0}"
                            th:text="| + *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage == 0 && addOption.damage != 0}"
                            th:text="|뎀 *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.allStat != 0}"
                            th:text="|올스탯 *{addOption.allStat}|"
                          ></span>
                        </div>
                        <span
                          th:if="${!weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                          th:text="|*{addOption.mainStat}급|"
                          >150급</span
                        >
                      </div>

                      <div th:if="*{addOption != null}" class="divider"></div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="preset-item-text-potential"
                      >
                        <span class="preset-item-text-potential-grade"
                          >주문서</span
                        >
                        <span
                          th:text="| ${#numbers.formatDecimal(item.value.etcOption[0], 1, 1)} / ${#numbers.formatDecimal(item.value.etcOption[1], 1, 1)} 작|"
                          >6 / 2작</span
                        >
                      </div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{potentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{potentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{potentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{potentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{potentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >잠재옵션</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{potentialValue != null}"
                            th:each="potential : *{potentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 33</span
                          >
                        </div>
                      </div>

                      <div
                        th:if="*{additionalPotentialValue != null}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{additionalPotentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{additionalPotentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{additionalPotentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{additionalPotentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{additionalPotentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >에디셔널</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{additionalPotentialValue != null}"
                            th:each="potential : *{additionalPotentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 20</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--기타 장비-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseFour"
              aria-expanded="false"
              aria-controls="collapseFour"
            >
              기타 장비
            </button>
          </h2>
          <div
            id="collapseFour"
            class="accordion-collapse collapse"
            aria-labelledby="headingFour"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body px-2">
              <div class="preset-item-container-category">
                <div
                  th:each="item : ${itemOthers}"
                  class="preset-item background-sub-light"
                  th:object="${item.value}"
                >
                  <div class="preset-item-sub">
                    <img
                      th:src="*{itemImage}"
                      alt="item image"
                      class="item-img"
                    />
                  </div>

                  <div class="preset-item-sub preset-item-text-box">
                    <div class="preset-item-text-title">
                      <span th:text="|Lv.*{itemBaseEquipLevel}|"></span>
                      <span
                        th:if="*{starforce != 0}"
                        th:text="|★*{starforce}|"
                        class="preset-item-starforce"
                        th:classappend="*{starforceScroll} ? 'preset-item-starforce-scroll' : ''"
                        >★22</span
                      >
                      <span th:text="*{itemName}">아이템 이름</span>
                    </div>

                    <div class="preset-item-text-options">
                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{addOption != null}"
                          class="preset-item-text-potential-grade"
                        >
                          추가옵션
                        </span>
                        <!--th:object="*{addOption}"-->
                        <div
                          th:if="${weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                        >
                          <span
                            th:if="*{addOption.power != 0}"
                            th:text="|공/마 *{addOption.power}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0}"
                            th:text="|보뎀 *{addOption.bossDamage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage != 0 && addOption.damage != 0}"
                            th:text="| + *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.bossDamage == 0 && addOption.damage != 0}"
                            th:text="|뎀 *{addOption.damage}|"
                          ></span>
                          <span
                            th:if="*{addOption.allStat != 0}"
                            th:text="|올스탯 *{addOption.allStat}|"
                          ></span>
                        </div>
                        <span
                          th:if="${!weaponList.contains(item.value.itemEquipmentSlot) && item.value.addOption != null}"
                          th:text="|*{addOption.mainStat}급|"
                          >150급</span
                        >
                      </div>

                      <div th:if="*{addOption != null}" class="divider"></div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="preset-item-text-potential"
                      >
                        <span class="preset-item-text-potential-grade"
                          >주문서</span
                        >
                        <span
                          th:text="| ${#numbers.formatDecimal(item.value.etcOption[0], 1, 1)} / ${#numbers.formatDecimal(item.value.etcOption[1], 1, 1)} 작|"
                          >6 / 2작</span
                        >
                      </div>

                      <div
                        th:if="${item.value.etcOption != null && isNormalServer}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{potentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{potentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{potentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{potentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{potentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >잠재옵션</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{potentialValue != null}"
                            th:each="potential : *{potentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 33</span
                          >
                        </div>
                      </div>

                      <div
                        th:if="*{additionalPotentialValue != null}"
                        class="divider"
                      ></div>

                      <div class="preset-item-text-potential">
                        <span
                          th:if="*{additionalPotentialValue != null}"
                          class="preset-item-text-potential-grade"
                          th:classappend="*{additionalPotentialGrade} == '레전드리' ? 'text-color-legendary' :
                                    (*{additionalPotentialGrade} == '유니크' ? 'text-color-unique' :
                                    (*{additionalPotentialGrade} == '에픽' ? 'text-color-epic' :
                                    (*{additionalPotentialGrade} == '레어' ? 'text-color-rare' : '')))"
                          >에디셔널</span
                        >
                        <div class="d-flex flex-column">
                          <span
                            th:if="*{additionalPotentialValue != null}"
                            th:each="potential : *{additionalPotentialValue}"
                            th:text="|${potential.key} : ${#numbers.formatDecimal(potential.value, 1, 1)}|"
                            >STR% : 20</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="preset-stat-container">
        <div class="preset-stat-container-upper">
          <!--스타포스-->
          <div class="preset-stat-specific-container background-white">
            <div class="preset-stat-title">
              <span class="preset-stat-title-text">스타포스</span>
              <div class="preset-stat-title-spacer"></div>
            </div>
            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span class="preset-stat-value-title">평균</span>
                <span
                  class="preset-stat-value-text"
                  th:text="|${#numbers.formatDecimal(presetTotalStat.averageStarforce, 1, 1)} 성|"
                  >21</span>
              </div>

              <div class="divider"></div>

              <div class="preset-stat-value">
              <span class="preset-stat-value-title">최대 / 최소</span>
              <span
                class="preset-stat-value-text"
                th:text="|${presetTotalStat.maximumStarforce} / ${presetTotalStat.minimumStarforce} 성|"
                >22 / 10</span
              >
            </div>
            </div>
          </div>

          <!--추가옵션-->
          <div
            class="preset-stat-specific-container preset-stat-specific-container-center background-white"
          >
            <div class="preset-stat-title">
              <span class="preset-stat-title-text">추가옵션</span>
              <div class="preset-stat-title-spacer"></div>
            </div>

            <div class="preset-stat-value-container">
              <div th:each="addOption, count : ${presetTotalStat.averageAddOption}">
                <div class="preset-stat-value">
                  <span th:text="|${addOption.key}제|"
                   >150제</span>
                  <span th:text="|${addOption.value} 급|">150</span>

                </div>
                <div th:if="${count.count != count.size}" class="divider"></div>
              </div>
            </div>
          </div>

          <!--주문서-->
          <div class="preset-stat-specific-container background-white" th:if="${isNormalServer}">
            <div class="preset-stat-title">
              <span class="preset-stat-title-text">평균 주문서 옵션</span>
              <div class="preset-stat-title-spacer"></div>
            </div>

            <div class="preset-stat-value-container">
              <div th:each="etcOption : ${presetTotalStat.averageEtcOption}" class="preset-stat-value">
                <span th:text="|${etcOption.key}|"></span>
                <span th:text="|${#numbers.formatDecimal(etcOption.value[0], 1, 1)} / ${#numbers.formatDecimal(etcOption.value[1], 1, 1)} 작|"></span>
              </div>
              <!--<span
                      th:text="|${#numbers.formatDecimal(presetTotalStat.averageEtcOption[0], 1, 1)} / ${#numbers.formatDecimal(presetTotalStat.averageEtcOption[1], 1, 1)} 작|"
              ></span>-->
            </div>
          </div>
        </div>

        <div class="preset-stat-container-upper">
          <!--잠재능력-->
          <div
            class="preset-stat-specific-container background-white"
            th:classappend="${isNormalServer ? 'margin-right-p5rem' : ''}"
          >
            <div class="preset-stat-title">
              <span class="preset-stat-title-text">잠재능력</span>
              <div class="preset-stat-title-spacer"></div>
            </div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>등급 개수</span>
                <div class="preset-stat-value-potential">
                  <div th:each="potentialGrade : ${presetTotalStat.potentialGradeCount}" th:if="${potentialGrade.value != 0}">
                    <span th:text="|${potentialGrade.key}|"
                          th:classappend="*{potentialGrade.key} == '레전드리' ? 'text-color-legendary' :
                                    (*{potentialGrade.key} == '유니크' ? 'text-color-unique' :
                                    (*{potentialGrade.key} == '에픽' ? 'text-color-epic' :
                                    (*{potentialGrade.key} == '레어' ? 'text-color-rare' : '')))"></span>
                    <span th:text="|${potentialGrade.value} 개|"></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>평균 수치</span>
                <div class="preset-stat-value-potential">
                  <div th:each="potentialValue : ${presetTotalStat.averagePotentialValue}" class="d-flex flex-row justify-content-between w-100">
                    <span th:if="${averageList.contains(potentialValue.key)}" th:text="|${potentialValue.key.replace('%','')}|"></span>
                    <span th:if="${averageList.contains(potentialValue.key)}" th:text="|${potentialValue.key.contains('%') ? potentialValue.value+'%': potentialValue.value}|"></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>전체 수치</span>
                <div class="preset-stat-value-potential">
                  <div th:each="potentialTotalValue : ${presetTotalStat.totalPotentialValue}" class="d-flex flex-row justify-content-between w-100">
                    <span
                      th:if="${totalList.contains(potentialTotalValue.key)}"
                      th:text="${potentialTotalValue.key.replace('%', '')}"></span>
                    <div th:if="${totalList.contains(potentialTotalValue.key)}">
                      <span th:text="|${#numbers.formatInteger(potentialTotalValue.value, 0)}${potentialTotalValue.key.contains('%')?'%':''}|"></span>
                      <span th:text="|(${#numbers.formatInteger(presetTotalStat.potentialOptionLines.get(potentialTotalValue.key), 0)} 줄)|"></span>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>

          <!--에디셔널 잠재능력-->
          <div
            class="preset-stat-specific-container background-white"
            th:if="${isNormalServer}"
          >
            <div class="preset-stat-title">
              <span class="preset-stat-title-text">에디셔널 잠재능력</span>
              <div class="preset-stat-title-spacer"></div>
            </div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>등급 개수</span>
                <div class="preset-stat-value-potential">
                  <div th:each="additionalPotentialGrade : ${presetTotalStat.additionalPotentialGradeCount}">
                    <span th:text="|${additionalPotentialGrade.key}|"
                          th:classappend="*{additionalPotentialGrade.key} == '레전드리' ? 'text-color-legendary' :
                                    (*{additionalPotentialGrade.key} == '유니크' ? 'text-color-unique' :
                                    (*{additionalPotentialGrade.key} == '에픽' ? 'text-color-epic' :
                                    (*{additionalPotentialGrade.key} == '레어' ? 'text-color-rare' : '')))">레전드리</span>
                    <span th:text="|${additionalPotentialGrade.value}개|">3 개</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>평균 수치</span>
                <div class="preset-stat-value-potential">
                  <div th:each="additionalPotentialValue : ${presetTotalStat.averageAdditionalPotentialValue}" class="d-flex flex-row justify-content-between w-100">
                    <span th:if="${averageList.contains(additionalPotentialValue.key)}"
                          th:text="|${additionalPotentialValue.key.replace('%', '')}|"></span>
                    <span th:if="${averageList.contains(additionalPotentialValue.key)}"
                          th:text="|${additionalPotentialValue.key.contains('%') ? additionalPotentialValue.value + '%' : additionalPotentialValue.value}|"></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="preset-stat-value-container">
              <div class="preset-stat-value">
                <span>전체 수치</span>
                <div class="preset-stat-value-potential">
                  <div th:each="additionalPotentialTotalValue : ${presetTotalStat.totalAdditionalPotentialValue}" class="d-flex flex-row justify-content-between w-100">
                    <span
                      th:if="${totalList.contains(additionalPotentialTotalValue.key)}"
                      th:text="|${additionalPotentialTotalValue.key.replace('%', '')}|"></span>
                    <div th:if="${totalList.contains(additionalPotentialTotalValue.key)}">
                      <span th:text="|${#numbers.formatInteger(additionalPotentialTotalValue.value, 0)}${additionalPotentialTotalValue.key.contains('%') ? '%':''}|"></span>
                      <!--<span th:text="|(${#numbers.formatInteger(presetTotalStat.additionalPotentialOptionLines.get(additionalPotentialTotalValue.key), 0)}줄)|"></span>-->
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </body>
</html>
